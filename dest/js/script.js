function popupShow(){overlay.classList.add("popup-overlay--show"),popup.classList.add("popup-form--show")}function getFullWidth(e){for(var i=0;i<e.length;i++)width+=e.eq(i).width();return width}function nextSlide(){slideActive.removeClass("slider-min__item--active"),slideNow==slideCount||slideNow<=0||slideNow>slideCount?(sliderItem.css("transform","translate(0, 0)"),navBtnId=(slideNow=1)-1,slideItemMin.eq(navBtnId).addClass("slider-min__item--active"),slideActive=slideItemMin.eq(navBtnId),getFullWidth>sliderMin&&slideItemMin.css("transform","translate(0, 0)")):(translateWidth=-sliderItemImg.width()*slideNow,sliderItem.css("transform","translate("+translateWidth+"px, 0)"),navBtnId=++slideNow-1,slideItemMin.eq(navBtnId).addClass("slider-min__item--active"),slideActive=slideItemMin.eq(navBtnId),getFullWidth>sliderMin&&(translateWidthMin=-sliderItemImgMin.width()/2*slideNow,slideItemMin.css("transform","translate("+translateWidthMin+"px, 0)")))}function prevSlide(){slideActive.removeClass("slider-min__item--active"),1==slideNow||slideNow<=0||slideNow>slideCount?(translateWidth=-sliderItemImg.width()*(slideCount-1),sliderItem.css("transform","translate("+translateWidth+"px, 0)"),navBtnId=(slideNow=slideCount)-1,slideItemMin.eq(navBtnId).addClass("slider-min__item--active"),slideActive=slideItemMin.eq(navBtnId),getFullWidth>sliderMin&&(translateWidthMin=-sliderItemImgMin.width()/2*(slideCount-1),slideItemMin.css("transform","translate("+translateWidthMin+"px, 0)"))):(translateWidth=-sliderItemImg.width()*(slideNow-2),sliderItem.css("transform","translate("+translateWidth+"px, 0)"),navBtnId=--slideNow-1,slideItemMin.eq(navBtnId).addClass("slider-min__item--active"),slideActive=slideItemMin.eq(navBtnId),getFullWidth>sliderMin&&(translateWidthMin=-sliderItemImgMin.width()/2*(slideNow-2),slideItemMin.css("transform","translate("+translateWidthMin+"px, 0)")))}var navMain=document.querySelector(".main-nav"),navToggle=document.querySelector(".main-nav__toogle"),aside=document.querySelector(".aside"),asideToggle=document.querySelector(".aside__toogle"),slideItemMinReply=document.querySelectorAll(".main-info__comments-reply"),singup=navMain.querySelector(".main-nav__item--signup"),popup=document.querySelector(".popup-form"),overlay=document.querySelector(".popup-overlay");popupClose=popup.querySelector(".popup-form--close"),navToggle.addEventListener("click",function(e){navMain.classList.toggle("main-nav--opened"),navToggle.classList.toggle("main-nav__toogle--opened")}),asideToggle.addEventListener("click",function(e){aside.classList.toggle("aside--opened"),asideToggle.classList.toggle("aside__toogle--opened")}),function(){if(slideItemMinReply.length>=4)for(var e=3;e<slideItemMinReply.length;e++)slideItemMinReply[e].classList.add("main-info__comments-reply--last")}(),popupClose.addEventListener("click",function(e){overlay.classList.contains("popup-overlay--show")&&(overlay.classList.remove("popup-overlay--show"),popup.classList.remove("popup-form--show"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&overlay.classList.contains("popup-overlay--show")&&(overlay.classList.remove("popup-overlay--show"),popup.classList.remove("popup-form--show"),sliderLarge.removeClass("slider__large--show"))}),overlay.addEventListener("click",function(e){overlay.classList.contains("popup-overlay--show")&&(overlay.classList.remove("popup-overlay--show"),popup.classList.remove("popup-form--show"),sliderLarge.removeClass("slider__large--show"))}),singup.addEventListener("click",function(){popupShow()});var slideNow=1,slideCount=$(".slider__items").children().length,translateWidth=0,translateWidthMin=0,slideActive=$(".slider-min__item--active"),sliderItem=$(".slider__item"),sliderItemImg=$(".slider__item img"),sliderItemImgMin=$(".slider-min__item img"),nextBtn=$(".next-btn"),prevBtn=$(".prev-btn"),slideItemMin=$(".slider-min__item"),sliderMin=$(".slider-min__items"),navBtnId=0,sliderLarge=$(".slider__large"),width=0;$(document).ready(function(){nextBtn.click(function(){nextSlide()}),prevBtn.click(function(){prevSlide()}),slideItemMin.click(function(){slideActive.removeClass("slider-min__item--active"),$(this).addClass("slider-min__item--active"),slideActive=$(this),(navBtnId=$(this).index())+1!=slideNow&&(translateWidth=-sliderItemImg.width()*navBtnId,$(".slider__item").css("transform","translate("+translateWidth+"px, 0)"),slideNow=navBtnId+1)}),sliderMin.click(function(){sliderLarge.addClass("slider__large--show"),overlay.classList.add("popup-overlay--show")}),getFullWidth(slideItemMin)});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJwb3B1cFNob3ciLCJvdmVybGF5IiwiY2xhc3NMaXN0IiwiYWRkIiwicG9wdXAiLCJnZXRGdWxsV2lkdGgiLCJhcnIiLCJpIiwibGVuZ3RoIiwid2lkdGgiLCJlcSIsIm5leHRTbGlkZSIsInNsaWRlQWN0aXZlIiwicmVtb3ZlQ2xhc3MiLCJzbGlkZU5vdyIsInNsaWRlQ291bnQiLCJzbGlkZXJJdGVtIiwiY3NzIiwibmF2QnRuSWQiLCJzbGlkZUl0ZW1NaW4iLCJhZGRDbGFzcyIsInNsaWRlck1pbiIsInRyYW5zbGF0ZVdpZHRoIiwic2xpZGVySXRlbUltZyIsInRyYW5zbGF0ZVdpZHRoTWluIiwic2xpZGVySXRlbUltZ01pbiIsInByZXZTbGlkZSIsIm5hdk1haW4iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJuYXZUb2dnbGUiLCJhc2lkZSIsImFzaWRlVG9nZ2xlIiwic2xpZGVJdGVtTWluUmVwbHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2luZ3VwIiwicG9wdXBDbG9zZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJlIiwidG9nZ2xlIiwiY29udGFpbnMiLCJyZW1vdmUiLCJ3aW5kb3ciLCJrZXlDb2RlIiwic2xpZGVyTGFyZ2UiLCIkIiwiY2hpbGRyZW4iLCJuZXh0QnRuIiwicHJldkJ0biIsInJlYWR5IiwiY2xpY2siLCJ0aGlzIiwiaW5kZXgiXSwibWFwcGluZ3MiOiJBQXlEQSxTQUFTQSxZQUNSQyxRQUFRQyxVQUFVQyxJQUFJLHVCQUN0QkMsTUFBTUYsVUFBVUMsSUFBSSxvQkF1QnJCLFNBQVNFLGFBQWNDLEdBQ3RCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFJRSxPQUFRRCxJQUMvQkUsT0FBU0gsRUFBSUksR0FBR0gsR0FBR0UsUUFFcEIsT0FBT0EsTUFrQ1IsU0FBU0UsWUFDUkMsWUFBWUMsWUFBWSw0QkFDcEJDLFVBQVlDLFlBQWNELFVBQVcsR0FBS0EsU0FBV0MsWUFDeERDLFdBQVdD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LFlBQVksMEJBSTNCc0IsT0FBT0UsaUJBQWlCLFFBQVMsV0FDaENyQyxjQVdELElBQUljLFNBQVcsRUFDZEMsV0FBYThCLEVBQUUsa0JBQWtCQyxXQUFXdEMsT0FDNUNjLGVBQWlCLEVBQ2pCRSxrQkFBb0IsRUFDcEJaLFlBQWNpQyxFQUFFLDZCQUNoQjdCLFdBQWE2QixFQUFFLGlCQUNmdEIsY0FBZ0JzQixFQUFFLHFCQUNsQnBCLGlCQUFtQm9CLEVBQUUseUJBQ3JCRSxRQUFVRixFQUFFLGFBQ1pHLFFBQVVILEVBQUUsYUFDWjFCLGFBQWUwQixFQUFFLHFCQUNqQnhCLFVBQVl3QixFQUFFLHNCQUNkM0IsU0FBVyxFQUNYMEIsWUFBY0MsRUFBRSxrQkFDaEJwQyxNQUFRLEVBVVRvQyxFQUFFakIsVUFBVXFCLE1BQU0sV0FDakJGLFFBQVFHLE1BQU0sV0FDYnZDLGNBR0RxQyxRQUFRRSxNQUFNLFdBQ2J4QixjQUdEUCxhQUFhK0IsTUFBTSxXQUNsQnRDLFlBQVlDLFlBQVksNEJBQ3hCZ0MsRUFBRU0sTUFBTS9CLFNBQVMsNEJBQ2pCUixZQUFjaUMsRUFBRU0sT0FDVmpDLFNBQVcyQixFQUFFTSxNQUFNQyxTQUNKLEdBQUt0QyxXQUNoQlEsZ0JBQWtCQyxjQUFjZCxRQUFVLFNBQzFDb0MsRUFBRSxpQkFBaUI1QixJQUNmLFlBQWEsYUFBZUssZUFBaUIsVUFFakRSLFNBQVdJLFNBQVcsS0FJOUJHLFVBQVU2QixNQUFNLFdBQ2ROLFlBQVl4QixTQUFTLHVCQUNyQm5CLFFBQVFDLFVBQVVDLElBQUkseUJBR3hCRSxhQUFhYyIsImZpbGUiOiJzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbmF2TWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW5hdicpLFxuICAgIG5hdlRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW5hdl9fdG9vZ2xlJyksXG4gICAgYXNpZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXNpZGUnKSxcbiAgICBhc2lkZVRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5hc2lkZV9fdG9vZ2xlJyApLFxuICAgIHNsaWRlSXRlbU1pblJlcGx5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm1haW4taW5mb19fY29tbWVudHMtcmVwbHknKSxcbiAgICBzaW5ndXAgPSBuYXZNYWluLnF1ZXJ5U2VsZWN0b3IoJy5tYWluLW5hdl9faXRlbS0tc2lnbnVwJyksXG4gICAgcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtZm9ybScpLFxuICAgIG92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtb3ZlcmxheScpXG4gICAgcG9wdXBDbG9zZSA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC1mb3JtLS1jbG9zZScpO1xuXG5uYXZUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdG5hdk1haW4uY2xhc3NMaXN0LnRvZ2dsZSgnbWFpbi1uYXYtLW9wZW5lZCcpO1xuXHRcdG5hdlRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdtYWluLW5hdl9fdG9vZ2xlLS1vcGVuZWQnKTtcbn0pO1xuXG5hc2lkZVRvZ2dsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG5cdFx0YXNpZGUuY2xhc3NMaXN0LnRvZ2dsZSgnYXNpZGUtLW9wZW5lZCcpO1xuXHRcdGFzaWRlVG9nZ2xlLmNsYXNzTGlzdC50b2dnbGUoJ2FzaWRlX190b29nbGUtLW9wZW5lZCcpO1xufSk7XG5cbihmdW5jdGlvbiAoKSB7XG5cdGlmIChzbGlkZUl0ZW1NaW5SZXBseS5sZW5ndGggPj0gNCkge1xuICBcdFx0Zm9yICh2YXIgaSA9IDM7IGkgPCBzbGlkZUl0ZW1NaW5SZXBseS5sZW5ndGg7IGkrKykge1xuICAgIFx0XHRzbGlkZUl0ZW1NaW5SZXBseVtpXS5jbGFzc0xpc3QuYWRkKCdtYWluLWluZm9fX2NvbW1lbnRzLXJlcGx5LS1sYXN0Jyk7XG4gIFx0XHR9XG5cdH1cbn0oKSk7XG5cbnBvcHVwQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRpZihvdmVybGF5LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAtb3ZlcmxheS0tc2hvdycpKSB7XG5cdFx0XHRvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLW92ZXJsYXktLXNob3cnKTtcblx0XHRcdHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLWZvcm0tLXNob3cnKTtcblx0XHR9XG59KTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuXHRpZihlLmtleUNvZGUgPT09IDI3KSB7XG5cdFx0aWYob3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLW92ZXJsYXktLXNob3cnKSkge1xuXHRcdFx0b3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1vdmVybGF5LS1zaG93Jyk7XG5cdFx0XHRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1mb3JtLS1zaG93Jyk7XG5cdFx0XHRzbGlkZXJMYXJnZS5yZW1vdmVDbGFzcygnc2xpZGVyX19sYXJnZS0tc2hvdycpO1xuXHRcdH1cblx0fVxufSk7XG5cbm92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRpZihvdmVybGF5LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAtb3ZlcmxheS0tc2hvdycpKSB7XG5cdFx0XHRvdmVybGF5LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLW92ZXJsYXktLXNob3cnKTtcblx0XHRcdHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLWZvcm0tLXNob3cnKTtcblx0XHRcdHNsaWRlckxhcmdlLnJlbW92ZUNsYXNzKCdzbGlkZXJfX2xhcmdlLS1zaG93Jyk7XG5cdFx0fVxufSk7XG5cbnNpbmd1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0cG9wdXBTaG93KCk7XG59KTtcblxuZnVuY3Rpb24gcG9wdXBTaG93ICgpIHtcblx0b3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdwb3B1cC1vdmVybGF5LS1zaG93Jyk7XG5cdHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWZvcm0tLXNob3cnKTtcbn1cblxuXG4vLy0tU2xpZGVyXG5cbnZhciBzbGlkZU5vdyA9IDEsXG5cdHNsaWRlQ291bnQgPSAkKCcuc2xpZGVyX19pdGVtcycpLmNoaWxkcmVuKCkubGVuZ3RoLFxuXHR0cmFuc2xhdGVXaWR0aCA9IDAsXG5cdHRyYW5zbGF0ZVdpZHRoTWluID0gMCxcblx0c2xpZGVBY3RpdmUgPSAkKCcuc2xpZGVyLW1pbl9faXRlbS0tYWN0aXZlJyksXG5cdHNsaWRlckl0ZW0gPSAkKCcuc2xpZGVyX19pdGVtJyksXG5cdHNsaWRlckl0ZW1JbWcgPSAkKCcuc2xpZGVyX19pdGVtIGltZycpLFxuXHRzbGlkZXJJdGVtSW1nTWluID0gJCgnLnNsaWRlci1taW5fX2l0ZW0gaW1nJyksXG5cdG5leHRCdG4gPSAkKCcubmV4dC1idG4nKSxcblx0cHJldkJ0biA9ICQoJy5wcmV2LWJ0bicpLFxuXHRzbGlkZUl0ZW1NaW4gPSAkKCcuc2xpZGVyLW1pbl9faXRlbScpLFxuXHRzbGlkZXJNaW4gPSAkKCcuc2xpZGVyLW1pbl9faXRlbXMnKSxcblx0bmF2QnRuSWQgPSAwLFxuXHRzbGlkZXJMYXJnZSA9ICQoJy5zbGlkZXJfX2xhcmdlJyksXG5cdHdpZHRoID0gMDtcblxuXG5mdW5jdGlvbiBnZXRGdWxsV2lkdGggKGFycikge1xuXHRmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuXHRcdHdpZHRoICs9IGFyci5lcShpKS53aWR0aCgpO1xuXHR9XG5cdHJldHVybiB3aWR0aFxufVxuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cdG5leHRCdG4uY2xpY2soZnVuY3Rpb24gKCkge1xuXHRcdG5leHRTbGlkZSgpO1xuXHR9KTtcblxuXHRwcmV2QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRwcmV2U2xpZGUoKTtcblx0fSk7XG5cblx0c2xpZGVJdGVtTWluLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHRcdHNsaWRlQWN0aXZlLnJlbW92ZUNsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcblx0XHQkKHRoaXMpLmFkZENsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcblx0XHRzbGlkZUFjdGl2ZSA9ICQodGhpcyk7XG4gICAgICAgIG5hdkJ0bklkID0gJCh0aGlzKS5pbmRleCgpO1xuICAgICAgICBpZiAobmF2QnRuSWQgKyAxICE9IHNsaWRlTm93KSB7XG4gICAgICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IC1zbGlkZXJJdGVtSW1nLndpZHRoKCkgKiAobmF2QnRuSWQpO1xuICAgICAgICAgICAgJCgnLnNsaWRlcl9faXRlbScpLmNzcyhcbiAgICAgICAgICAgICAgICAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdHJhbnNsYXRlV2lkdGggKyAncHgsIDApJ1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHNsaWRlTm93ID0gbmF2QnRuSWQgKyAxO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBzbGlkZXJNaW4uY2xpY2soZnVuY3Rpb24gKCkge1xuICAgIFx0XHRzbGlkZXJMYXJnZS5hZGRDbGFzcygnc2xpZGVyX19sYXJnZS0tc2hvdycpO1xuICAgIFx0XHRvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3BvcHVwLW92ZXJsYXktLXNob3cnKTtcbiAgICBcdH0pO1xuXG4gICAgZ2V0RnVsbFdpZHRoKHNsaWRlSXRlbU1pbik7XG59KVx0XG5cbmZ1bmN0aW9uIG5leHRTbGlkZSAoKSB7XG5cdHNsaWRlQWN0aXZlLnJlbW92ZUNsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcblx0aWYgKHNsaWRlTm93ID09IHNsaWRlQ291bnQgfHwgc2xpZGVOb3cgPD0wIHx8IHNsaWRlTm93ID4gc2xpZGVDb3VudCkge1xuXHRcdHNsaWRlckl0ZW0uY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsIDApJyk7XG5cdFx0c2xpZGVOb3cgPSAxO1xuXHRcdG5hdkJ0bklkID0gc2xpZGVOb3cgLTE7XG5cdFx0c2xpZGVJdGVtTWluLmVxKG5hdkJ0bklkKS5hZGRDbGFzcygnc2xpZGVyLW1pbl9faXRlbS0tYWN0aXZlJyk7XG5cdFx0c2xpZGVBY3RpdmUgPSBzbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpO1xuXHRcdGlmIChnZXRGdWxsV2lkdGggPiBzbGlkZXJNaW4pIHtcblx0XHRcdHNsaWRlSXRlbU1pbi5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwgMCknKTtcblx0XHR9XG5cdFx0XG5cdH0gZWxzZSB7XG5cdFx0dHJhbnNsYXRlV2lkdGggPSAtc2xpZGVySXRlbUltZy53aWR0aCgpICogKHNsaWRlTm93KTtcblx0XHRzbGlkZXJJdGVtLmNzcyhcblx0XHRcdCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFuc2xhdGVXaWR0aCArICdweCwgMCknKTtcblx0XHRzbGlkZU5vdysrO1xuXHRcdG5hdkJ0bklkID0gc2xpZGVOb3cgLTE7XG5cdFx0c2xpZGVJdGVtTWluLmVxKG5hdkJ0bklkKS5hZGRDbGFzcygnc2xpZGVyLW1pbl9faXRlbS0tYWN0aXZlJyk7XG5cdFx0c2xpZGVBY3RpdmUgPSBzbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpO1xuXHRcdGlmIChnZXRGdWxsV2lkdGggPiBzbGlkZXJNaW4pIHtcblx0XHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKS8yICogKHNsaWRlTm93KTtcblx0XHRcdHNsaWRlSXRlbU1pbi5jc3MoXG5cdFx0XHQndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdHJhbnNsYXRlV2lkdGhNaW4gKyAncHgsIDApJyk7XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHByZXZTbGlkZSAoKSB7XG5cdHNsaWRlQWN0aXZlLnJlbW92ZUNsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcblx0aWYgKHNsaWRlTm93ID09IDEgfHwgc2xpZGVOb3cgPD0wIHx8IHNsaWRlTm93ID4gc2xpZGVDb3VudCkge1xuXHRcdHRyYW5zbGF0ZVdpZHRoID0gLXNsaWRlckl0ZW1JbWcud2lkdGgoKSAqIChzbGlkZUNvdW50IC0gMSk7XG5cdFx0c2xpZGVySXRlbS5jc3MoXG5cdFx0XHQndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdHJhbnNsYXRlV2lkdGggKyAncHgsIDApJyk7XG5cdFx0c2xpZGVOb3cgPSBzbGlkZUNvdW50O1xuXHRcdG5hdkJ0bklkID0gc2xpZGVOb3cgLTE7XG5cdFx0c2xpZGVJdGVtTWluLmVxKG5hdkJ0bklkKS5hZGRDbGFzcygnc2xpZGVyLW1pbl9faXRlbS0tYWN0aXZlJyk7XG5cdFx0c2xpZGVBY3RpdmUgPSBzbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpO1xuXHRcdGlmIChnZXRGdWxsV2lkdGggPiBzbGlkZXJNaW4pIHtcblx0XHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKS8yICogKHNsaWRlQ291bnQtMSk7XG5cdFx0XHRzbGlkZUl0ZW1NaW4uY3NzKFxuXHRcdFx0J3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHRyYW5zbGF0ZVdpZHRoTWluICsgJ3B4LCAwKScpO1xuXHRcdH1cblx0fSBlbHNlIHtcblx0XHR0cmFuc2xhdGVXaWR0aCA9IC1zbGlkZXJJdGVtSW1nLndpZHRoKCkgKiAoc2xpZGVOb3cgLSAyKTtcblx0XHRzbGlkZXJJdGVtLmNzcyhcblx0XHRcdCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFuc2xhdGVXaWR0aCArICdweCwgMCknKTtcblx0XHRzbGlkZU5vdy0tO1xuXHRcdG5hdkJ0bklkID0gc2xpZGVOb3cgLTE7XG5cdFx0c2xpZGVJdGVtTWluLmVxKG5hdkJ0bklkKS5hZGRDbGFzcygnc2xpZGVyLW1pbl9faXRlbS0tYWN0aXZlJyk7XG5cdFx0c2xpZGVBY3RpdmUgPSBzbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpO1xuXHRcdGlmIChnZXRGdWxsV2lkdGggPiBzbGlkZXJNaW4pIHtcblx0XHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKS8yICogKHNsaWRlTm93LTIpO1xuXHRcdFx0c2xpZGVJdGVtTWluLmNzcyhcblx0XHRcdCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFuc2xhdGVXaWR0aE1pbiArICdweCwgMCknKTtcblx0XHR9XG5cdH1cbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
