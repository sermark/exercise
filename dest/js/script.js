function getFullWidth(e){for(var t=0;t<e.length;t++)width+=e.eq(t).width();return width}function nextSlide(){slideNow==slideCount||slideNow<=0||slideNow>slideCount?(slideNow=1,slideItemMin.css("transform","translate(0, 0)")):(slideNow++,translateWidthMin=-sliderItemImgMin.width()*slideNow,slideItemMin.css("transform","translate("+translateWidthMin+"px, 0)"))}function prevSlide(){1==slideNow||slideNow<=0||slideNow>slideCount?(slideNow=slideCount,translateWidthMin=-sliderItemImgMin.width()*(slideCount-1),slideItemMin.css("transform","translate("+translateWidthMin+"px, 0)")):(slideNow--,translateWidthMin=-sliderItemImgMin.width()*(slideNow-2),slideItemMin.css("transform","translate("+translateWidthMin+"px, 0)"))}function callBack(){function e(e){var o=e.targetTouches[0].clientY-n;0===i.scrollTop&&o>0&&e.preventDefault(),t()&&o<0&&e.preventDefault()}function t(){return i.scrollHeight-i.scrollTop<=i.clientHeight}var i=document.querySelector(".mfp-bg"),n=null;i.addEventListener("touchstart",function(e){1===e.targetTouches.length&&(n=e.targetTouches[0].clientY)},!1),i.addEventListener("touchmove",function(t){1===t.targetTouches.length&&e(t)},!1)}var navMain=document.querySelector(".main-nav"),navToggle=document.querySelector(".main-nav__toogle"),aside=document.querySelector(".aside"),asideToggle=document.querySelector(".aside__toogle"),slideItemMinReply=document.querySelectorAll(".main-info__comments-reply"),singup=navMain.querySelector(".main-nav__item--signup"),popup=document.querySelector(".popup-form"),overlay=document.querySelector(".popup-overlay");popupClose=popup.querySelector(".popup-form--close"),body=document.querySelector("body");var body=document.querySelector("body");navToggle.addEventListener("click",function(e){navMain.classList.toggle("main-nav--opened"),navToggle.classList.toggle("main-nav__toogle--opened")}),asideToggle.addEventListener("click",function(e){aside.classList.toggle("aside--opened"),asideToggle.classList.toggle("aside__toogle--opened")}),function(){if(slideItemMinReply.length>=4)for(var e=3;e<slideItemMinReply.length;e++)slideItemMinReply[e].classList.add("main-info__comments-reply--last")}(),$(document).ready(function(){function e(){overlay.classList.add("popup-overlay--show"),body.classList.add("prevent-scroll")}popupClose.addEventListener("click",function(e){overlay.classList.contains("popup-overlay--show")&&(overlay.classList.remove("popup-overlay--show"),body.classList.remove("prevent-scroll"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&overlay.classList.contains("popup-overlay--show")&&(overlay.classList.remove("popup-overlay--show"),sliderLarge.removeClass("slider__large--show"),body.classList.remove("prevent-scroll"))}),singup.addEventListener("click",function(){e()})});var slideNow=1,slideCount=$(".slider__items").children().length,translateWidth=0,translateWidthMin=0,slideActive=$(".slider-min__item--active"),sliderItem=$(".slider__item"),sliderItemImg=$(".slider__item img"),sliderItemImgMin=$(".slider-min__item img"),nextBtn=$(".next-btn"),prevBtn=$(".prev-btn"),slideItemMin=$(".slider-min__item"),sliderMin=$(".slider-min__items"),navBtnId=0,sliderLarge=$(".slider__large"),width=0;$(document).ready(function(){nextBtn.click(function(){nextSlide()}),prevBtn.click(function(){prevSlide()}),getFullWidth(slideItemMin)}),$(document).ready(function(){$(".slider__items").slick({slidesToShow:6,slidesToScroll:3,infinite:!1,responsive:[{breakpoint:800,settings:{slidesToShow:4,slidesToScroll:1}},{breakpoint:500,settings:{slidesToShow:3,slidesToScroll:1}}]}),mainInfo.css("margin-top",sticky.height()+"px")});var sticky=$(".page-header"),mainInfo=$(".main-info");!function(e){var t=e(".pswp")[0],i=[];e(".popup-gallery").each(function(){var n=e(this),o=function(){var t=[];return n.find("a").each(function(){var i=[1e3,667],n={src:e(this).attr("href"),w:i[0],h:i[1]};t.push(n)}),t}();e.each(o,function(e,t){i[e]=new Image,i[e].src=t.src}),n.on("click","a",function(i){i.preventDefault();var n={index:e(this).index(),bgOpacity:.7,showHideOpacity:!0,closeOnScroll:!1,arrowKeys:!0,shareEl:!1,showHideOpacity:!0};new PhotoSwipe(t,PhotoSwipeUI_Default,o,n).init()})})}(jQuery);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNjcmlwdC5qcyJdLCJuYW1lcyI6WyJnZXRGdWxsV2lkdGgiLCJhcnIiLCJpIiwibGVuZ3RoIiwid2lkdGgiLCJlcSIsIm5leHRTbGlkZSIsInNsaWRlTm93Iiwic2xpZGVDb3VudCIsInNsaWRlSXRlbU1pbiIsImNzcyIsInRyYW5zbGF0ZVdpZHRoTWluIiwic2xpZGVySXRlbUltZ01pbiIsInByZXZTbGlkZSIsImNhbGxCYWNrIiwiZGlzYWJsZVJ1YmJlckJhbmQiLCJldmVudCIsImNsaWVudFkiLCJ0YXJnZXRUb3VjaGVzIiwiX2NsaWVudFkiLCJfb3ZlcmxheSIsInNjcm9sbFRvcCIsInByZXZlbnREZWZhdWx0IiwiaXNPdmVybGF5VG90YWxseVNjcm9sbGVkIiwic2Nyb2xsSGVpZ2h0IiwiY2xpZW50SGVpZ2h0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm5hdk1haW4iLCJuYXZUb2dnbGUiLCJhc2lkZSIsImFzaWRlVG9nZ2xlIiwic2xpZGVJdGVtTWluUmVwbHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2luZ3VwIiwicG9wdXAiLCJvdmVybGF5IiwicG9wdXBDbG9zZSIsImJvZHkiLCJlIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiYWRkIiwiJCIsInJlYWR5IiwicG9wdXBTaG93IiwiY29udGFpbnMiLCJyZW1vdmUiLCJ3aW5kb3ciLCJrZXlDb2RlIiwic2xpZGVyTGFyZ2UiLCJyZW1vdmVDbGFzcyIsImNoaWxkcmVuIiwidHJhbnNsYXRlV2lkdGgiLCJzbGlkZUFjdGl2ZSIsInNsaWRlckl0ZW0iLCJzbGlkZXJJdGVtSW1nIiwibmV4dEJ0biIsInByZXZCdG4iLCJzbGlkZXJNaW4iLCJuYXZCdG5JZCIsImNsaWNrIiwic2xpY2siLCJzbGlkZXNUb1Nob3ciLCJzbGlkZXNUb1Njcm9sbCIsImluZmluaXRlIiwicmVzcG9uc2l2ZSIsImJyZWFrcG9pbnQiLCJzZXR0aW5ncyIsIm1haW5JbmZvIiwic3RpY2t5IiwiaGVpZ2h0IiwiJHBzd3AiLCJpbWFnZSIsImVhY2giLCIkcGljIiwidGhpcyIsIml0ZW1zIiwiZmluZCIsIiRzaXplIiwiaXRlbSIsInNyYyIsImF0dHIiLCJ3IiwiaCIsInB1c2giLCJnZXRJdGVtcyIsImluZGV4IiwidmFsdWUiLCJJbWFnZSIsIm9uIiwib3B0aW9ucyIsImJnT3BhY2l0eSIsInNob3dIaWRlT3BhY2l0eSIsImNsb3NlT25TY3JvbGwiLCJhcnJvd0tleXMiLCJzaGFyZUVsIiwiUGhvdG9Td2lwZSIsIlBob3RvU3dpcGVVSV9EZWZhdWx0IiwiaW5pdCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkFBcUlBLFNBQVNBLGFBQWNDLEdBQ3RCLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJRCxFQUFJRSxPQUFRRCxJQUMvQkUsT0FBU0gsRUFBSUksR0FBR0gsR0FBR0UsUUFFcEIsT0FBT0EsTUFxQ1IsU0FBU0UsWUFDSkMsVUFBWUMsWUFBY0QsVUFBVyxHQUFLQSxTQUFXQyxZQUN4REQsU0FBVyxFQUNYRSxhQUFhQyxJQUFJLFlBQWEscUJBSTlCSCxXQUNBSSxtQkFBcUJDLGlCQUFpQlIsUUFBVSxTQUNoREssYUFBYUMsSUFDWixZQUFhLGFBQWVDLGtCQUFvQixXQUluRCxTQUFTRSxZQUNRLEdBQVpOLFVBQWlCQSxVQUFXLEdBQUtBLFNBQVdDLFlBQy9DRCxTQUFXQyxXQUNYRyxtQkFBcUJDLGlCQUFpQlIsU0FBV0ksV0FBVyxHQUM1REMsYUFBYUMsSUFDWixZQUFhLGFBQWVDLGtCQUFvQixZQUdqREosV0FDQUksbUJBQXFCQyxpQkFBaUJSLFNBQVdHLFNBQVMsR0FDMURFLGFBQWFDLElBQ1osWUFBYSxhQUFlQyxrQkFBb0IsV0FxS25ELFNBQVNHLFdBa0JMLFNBQVNDLEVBQWtCQyxHQUN2QixJQUFJQyxFQUFVRCxFQUFNRSxjQUFjLEdBQUdELFFBQVVFLEVBRXBCLElBQXZCQyxFQUFTQyxXQUFtQkosRUFBVSxHQUV0Q0QsRUFBTU0saUJBR05DLEtBQThCTixFQUFVLEdBRXhDRCxFQUFN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LEVBQUUsZ0JBQ1gwQixTQUFXMUIsRUFBRSxlQTZGakIsU0FBVUEsR0FDTixJQUFJNkIsRUFBUTdCLEVBQUUsU0FBUyxHQUNuQjhCLEtBRUo5QixFQUFFLGtCQUFrQitCLEtBQU0sV0FDdEIsSUFBSUMsRUFBV2hDLEVBQUVpQyxNQW9CYkMsRUFuQlcsV0FDUCxJQUFJQSxLQWVKLE9BZEFGLEVBQUtHLEtBQUssS0FBS0osS0FBSyxXQUNoQixJQUNJSyxHQUFXLElBQU0sS0FJakJDLEdBQ0FDLElBTlV0QyxFQUFFaUMsTUFBTU0sS0FBSyxRQU92QkMsRUFMVUosRUFBTSxHQU1oQkssRUFMVUwsRUFBTSxJQVFwQkYsRUFBTVEsS0FBS0wsS0FFUkgsRUFHSFMsR0FFWjNDLEVBQUUrQixLQUFLRyxFQUFPLFNBQVNVLEVBQU9DLEdBQzFCZixFQUFNYyxHQUFhLElBQUlFLE1BQ3ZCaEIsRUFBTWMsR0FBT04sSUFBTU8sRUFBVyxNQUdsQ2IsRUFBS2UsR0FBRyxRQUFTLElBQUssU0FBUzNFLEdBQzNCQSxFQUFNTSxpQkFFTixJQUNJc0UsR0FDQUosTUFGUzVDLEVBQUVpQyxNQUFNVyxRQUdqQkssVUFBVyxHQUNYQyxpQkFBaUIsRUFDakJDLGVBQWUsRUFDZkMsV0FBVyxFQUNYQyxTQUFTLEVBQ1RILGlCQUFpQixHQUdOLElBQUlJLFdBQVd6QixFQUFPMEIscUJBQXNCckIsRUFBT2MsR0FDekRRLFdBL0NyQixDQWtER0MiLCJmaWxlIjoic2NyaXB0LmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIG5hdk1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1uYXYnKSxcbiAgICBuYXZUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWFpbi1uYXZfX3Rvb2dsZScpLFxuICAgIGFzaWRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFzaWRlJyksXG4gICAgYXNpZGVUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYXNpZGVfX3Rvb2dsZScgKSxcbiAgICBzbGlkZUl0ZW1NaW5SZXBseSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYWluLWluZm9fX2NvbW1lbnRzLXJlcGx5JyksXG4gICAgc2luZ3VwID0gbmF2TWFpbi5xdWVyeVNlbGVjdG9yKCcubWFpbi1uYXZfX2l0ZW0tLXNpZ251cCcpLFxuICAgIHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWZvcm0nKSxcbiAgICBvdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLW92ZXJsYXknKVxuICAgIHBvcHVwQ2xvc2UgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtZm9ybS0tY2xvc2UnKSxcbiAgICBib2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpO1xuXG4gdmFyICAgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKTtcblxubmF2VG9nZ2xlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcblx0XHRuYXZNYWluLmNsYXNzTGlzdC50b2dnbGUoJ21haW4tbmF2LS1vcGVuZWQnKTtcblx0XHRuYXZUb2dnbGUuY2xhc3NMaXN0LnRvZ2dsZSgnbWFpbi1uYXZfX3Rvb2dsZS0tb3BlbmVkJyk7XG59KTtcblxuYXNpZGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdGFzaWRlLmNsYXNzTGlzdC50b2dnbGUoJ2FzaWRlLS1vcGVuZWQnKTtcblx0XHRhc2lkZVRvZ2dsZS5jbGFzc0xpc3QudG9nZ2xlKCdhc2lkZV9fdG9vZ2xlLS1vcGVuZWQnKTtcbn0pO1xuXG4oZnVuY3Rpb24gKCkge1xuXHRpZiAoc2xpZGVJdGVtTWluUmVwbHkubGVuZ3RoID49IDQpIHtcbiAgXHRcdGZvciAodmFyIGkgPSAzOyBpIDwgc2xpZGVJdGVtTWluUmVwbHkubGVuZ3RoOyBpKyspIHtcbiAgICBcdFx0c2xpZGVJdGVtTWluUmVwbHlbaV0uY2xhc3NMaXN0LmFkZCgnbWFpbi1pbmZvX19jb21tZW50cy1yZXBseS0tbGFzdCcpO1xuICBcdFx0fVxuXHR9XG59KCkpO1xuXG5cblxuXG4vLyBwb3B1cENsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcbi8vIFx0aWYob3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLW92ZXJsYXktLXNob3cnKSkge1xuLy8gXHRcdFx0b3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1vdmVybGF5LS1zaG93Jyk7XG4vLyBcdFx0XHQvL3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLWZvcm0tLXNob3cnKTtcbi8vIFx0XHR9XG4vLyB9KTtcblxuLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBmdW5jdGlvbiAoZSkge1xuLy8gXHRpZihlLmtleUNvZGUgPT09IDI3KSB7XG4vLyBcdFx0aWYob3ZlcmxheS5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLW92ZXJsYXktLXNob3cnKSkge1xuLy8gXHRcdFx0b3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1vdmVybGF5LS1zaG93Jyk7XG4vLyBcdFx0XHQvL3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLWZvcm0tLXNob3cnKTtcbi8vIFx0XHRcdHNsaWRlckxhcmdlLnJlbW92ZUNsYXNzKCdzbGlkZXJfX2xhcmdlLS1zaG93Jyk7XG4vLyBcdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ByZXZlbnQtc2Nyb2xsJyk7XG4vLyBcdFx0fVxuLy8gXHR9XG4vLyB9KTtcblxuLy8gLy8gb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4vLyAvLyBcdGlmKG92ZXJsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC1vdmVybGF5LS1zaG93JykpIHtcbi8vIC8vIFx0XHRcdG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtb3ZlcmxheS0tc2hvdycpO1xuLy8gLy8gXHRcdFx0Ly9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1mb3JtLS1zaG93Jyk7XG4vLyAvLyBcdFx0XHRzbGlkZXJMYXJnZS5yZW1vdmVDbGFzcygnc2xpZGVyX19sYXJnZS0tc2hvdycpO1xuLy8gLy8gXHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmV2ZW50LXNjcm9sbCcpO1xuLy8gLy8gXHRcdH1cbi8vIC8vIH0pO1xuXG4vLyBzaW5ndXAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4vLyBcdHBvcHVwU2hvdygpO1xuLy8gXHQvLyBpZiAobmF2TWFpbi5jbGFzc0xpc3QuY29udGFpbnMoJ21haW4tbmF2LS1vcGVuZWQnKSkge1xuLy8gXHQvLyBcdFx0bmF2TWFpbi5jbGFzc0xpc3QucmVtb3ZlKCdtYWluLW5hdi0tb3BlbmVkJyk7XG4vLyBcdC8vIFx0XHRuYXZUb2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnbWFpbi1uYXZfX3Rvb2dsZS0tb3BlbmVkJyk7XG4vLyBcdC8vIH1cbi8vIH0pO1xuXG4vLyBmdW5jdGlvbiBwb3B1cFNob3cgKCkge1xuLy8gXHRvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3BvcHVwLW92ZXJsYXktLXNob3cnKTtcbi8vIFx0Ly9wb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cC1mb3JtLS1zaG93Jyk7XG4vLyBcdGJvZHkuY2xhc3NMaXN0LmFkZCgncHJldmVudC1zY3JvbGwnKTtcblxuLy8gfVxuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cdHBvcHVwQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuXHRcdGlmKG92ZXJsYXkuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC1vdmVybGF5LS1zaG93JykpIHtcblx0XHRcdFx0b3ZlcmxheS5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC1vdmVybGF5LS1zaG93Jyk7XG5cdFx0XHRcdC8vcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtZm9ybS0tc2hvdycpO1xuXHRcdFx0XHRib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ3ByZXZlbnQtc2Nyb2xsJyk7XG5cdFx0XHR9XG5cdH0pO1xuXG5cdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGUpIHtcblx0XHRpZihlLmtleUNvZGUgPT09IDI3KSB7XG5cdFx0XHRpZihvdmVybGF5LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAtb3ZlcmxheS0tc2hvdycpKSB7XG5cdFx0XHRcdG92ZXJsYXkuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtb3ZlcmxheS0tc2hvdycpO1xuXHRcdFx0XHQvL3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwLWZvcm0tLXNob3cnKTtcblx0XHRcdFx0c2xpZGVyTGFyZ2UucmVtb3ZlQ2xhc3MoJ3NsaWRlcl9fbGFyZ2UtLXNob3cnKTtcblx0XHRcdFx0Ym9keS5jbGFzc0xpc3QucmVtb3ZlKCdwcmV2ZW50LXNjcm9sbCcpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cblx0c2luZ3VwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHRcdHBvcHVwU2hvdygpO1xuXHRcdC8vIGlmIChuYXZNYWluLmNsYXNzTGlzdC5jb250YWlucygnbWFpbi1uYXYtLW9wZW5lZCcpKSB7XG5cdFx0Ly8gXHRcdG5hdk1haW4uY2xhc3NMaXN0LnJlbW92ZSgnbWFpbi1uYXYtLW9wZW5lZCcpO1xuXHRcdC8vIFx0XHRuYXZUb2dnbGUuY2xhc3NMaXN0LnJlbW92ZSgnbWFpbi1uYXZfX3Rvb2dsZS0tb3BlbmVkJyk7XG5cdFx0Ly8gfVxuXHR9KTtcblxuXHRmdW5jdGlvbiBwb3B1cFNob3cgKCkge1xuXHRcdG92ZXJsYXkuY2xhc3NMaXN0LmFkZCgncG9wdXAtb3ZlcmxheS0tc2hvdycpO1xuXHRcdC8vcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXAtZm9ybS0tc2hvdycpO1xuXHRcdGJvZHkuY2xhc3NMaXN0LmFkZCgncHJldmVudC1zY3JvbGwnKTtcblx0fVxufSk7XG5cblxuLy8gLS1TbGlkZXJcblxudmFyIHNsaWRlTm93ID0gMSxcblx0c2xpZGVDb3VudCA9ICQoJy5zbGlkZXJfX2l0ZW1zJykuY2hpbGRyZW4oKS5sZW5ndGgsXG5cdHRyYW5zbGF0ZVdpZHRoID0gMCxcblx0dHJhbnNsYXRlV2lkdGhNaW4gPSAwLFxuXHRzbGlkZUFjdGl2ZSA9ICQoJy5zbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKSxcblx0c2xpZGVySXRlbSA9ICQoJy5zbGlkZXJfX2l0ZW0nKSxcblx0c2xpZGVySXRlbUltZyA9ICQoJy5zbGlkZXJfX2l0ZW0gaW1nJyksXG5cdHNsaWRlckl0ZW1JbWdNaW4gPSAkKCcuc2xpZGVyLW1pbl9faXRlbSBpbWcnKSxcblx0bmV4dEJ0biA9ICQoJy5uZXh0LWJ0bicpLFxuXHRwcmV2QnRuID0gJCgnLnByZXYtYnRuJyksXG5cdHNsaWRlSXRlbU1pbiA9ICQoJy5zbGlkZXItbWluX19pdGVtJyksXG5cdHNsaWRlck1pbiA9ICQoJy5zbGlkZXItbWluX19pdGVtcycpLFxuXHRuYXZCdG5JZCA9IDAsXG5cdHNsaWRlckxhcmdlID0gJCgnLnNsaWRlcl9fbGFyZ2UnKSxcblx0d2lkdGggPSAwO1xuXG5cbmZ1bmN0aW9uIGdldEZ1bGxXaWR0aCAoYXJyKSB7XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0d2lkdGggKz0gYXJyLmVxKGkpLndpZHRoKCk7XG5cdH1cblx0cmV0dXJuIHdpZHRoXG59XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcblxuXHRuZXh0QnRuLmNsaWNrKGZ1bmN0aW9uICgpIHtcblx0XHRuZXh0U2xpZGUoKTtcblx0fSk7XG5cblx0cHJldkJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG5cdFx0cHJldlNsaWRlKCk7XG5cdH0pO1xuXG5cblx0Ly8gc2xpZGVJdGVtTWluLmNsaWNrKGZ1bmN0aW9uKCkge1xuXHQvLyBcdHNsaWRlQWN0aXZlLnJlbW92ZUNsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcblx0Ly8gXHQkKHRoaXMpLmFkZENsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcblx0Ly8gXHRzbGlkZUFjdGl2ZSA9ICQodGhpcyk7XG4gLy8gICAgICAgIG5hdkJ0bklkID0gJCh0aGlzKS5pbmRleCgpO1xuIC8vICAgICAgICBpZiAobmF2QnRuSWQgKyAxICE9IHNsaWRlTm93KSB7XG4gLy8gICAgICAgICAgICB0cmFuc2xhdGVXaWR0aCA9IC1zbGlkZXJJdGVtSW1nLndpZHRoKCkgKiAobmF2QnRuSWQpO1xuIC8vICAgICAgICAgICAgJCgnLnNsaWRlcl9faXRlbScpLmNzcyhcbiAvLyAgICAgICAgICAgICAgICAndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdHJhbnNsYXRlV2lkdGggKyAncHgsIDApJ1xuIC8vICAgICAgICAgICAgKTtcbiAvLyAgICAgICAgICAgIHNsaWRlTm93ID0gbmF2QnRuSWQgKyAxO1xuIC8vICAgICAgICB9XG4gLy8gICAgfSk7XG5cbiAvLyAgICBzbGlkZXJNaW4uY2xpY2soZnVuY3Rpb24gKCkge1xuIC8vICAgIFx0XHRzbGlkZXJMYXJnZS5hZGRDbGFzcygnc2xpZGVyX19sYXJnZS0tc2hvdycpO1xuIC8vICAgIFx0XHRvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3BvcHVwLW92ZXJsYXktLXNob3cnKTtcbiAvLyAgICBcdH0pO1xuXG4gICAgZ2V0RnVsbFdpZHRoKHNsaWRlSXRlbU1pbik7XG59KVx0XG5cblxuZnVuY3Rpb24gbmV4dFNsaWRlICgpIHtcblx0aWYgKHNsaWRlTm93ID09IHNsaWRlQ291bnQgfHwgc2xpZGVOb3cgPD0wIHx8IHNsaWRlTm93ID4gc2xpZGVDb3VudCkge1xuXHRcdHNsaWRlTm93ID0gMTtcblx0XHRzbGlkZUl0ZW1NaW4uY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsIDApJyk7XG5cdFx0XG5cdH0gZWxzZSB7XG5cblx0XHRzbGlkZU5vdysrO1xuXHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKSAqIChzbGlkZU5vdyk7XG5cdFx0c2xpZGVJdGVtTWluLmNzcyhcblx0XHRcdCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFuc2xhdGVXaWR0aE1pbiArICdweCwgMCknKTtcblx0fVxufVxuXG5mdW5jdGlvbiBwcmV2U2xpZGUgKCkge1xuXHRpZiAoc2xpZGVOb3cgPT0gMSB8fCBzbGlkZU5vdyA8PTAgfHwgc2xpZGVOb3cgPiBzbGlkZUNvdW50KSB7XG5cdFx0c2xpZGVOb3cgPSBzbGlkZUNvdW50O1xuXHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKSAqIChzbGlkZUNvdW50LTEpO1xuXHRcdHNsaWRlSXRlbU1pbi5jc3MoXG5cdFx0XHQndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdHJhbnNsYXRlV2lkdGhNaW4gKyAncHgsIDApJyk7XG5cdH0gZWxzZSB7XG5cblx0XHRzbGlkZU5vdy0tO1xuXHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKSAqIChzbGlkZU5vdy0yKTtcblx0XHRzbGlkZUl0ZW1NaW4uY3NzKFxuXHRcdFx0J3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHRyYW5zbGF0ZVdpZHRoTWluICsgJ3B4LCAwKScpO1xuXHR9XG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuLy8gZnVuY3Rpb24gbmV4dFNsaWRlICgpIHtcbi8vIFx0Ly9zbGlkZUFjdGl2ZS5yZW1vdmVDbGFzcygnc2xpZGVyLW1pbl9faXRlbS0tYWN0aXZlJyk7XG4vLyBcdGlmIChzbGlkZU5vdyA9PSBzbGlkZUNvdW50IHx8IHNsaWRlTm93IDw9MCB8fCBzbGlkZU5vdyA+IHNsaWRlQ291bnQpIHtcbi8vIFx0XHQvL3NsaWRlckl0ZW0uY3NzKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKDAsIDApJyk7XG4vLyBcdFx0c2xpZGVOb3cgPSAxO1xuLy8gXHRcdC8vbmF2QnRuSWQgPSBzbGlkZU5vdyAtMTtcbi8vIFx0XHQvL3NsaWRlSXRlbU1pbi5lcShuYXZCdG5JZCkuYWRkQ2xhc3MoJ3NsaWRlci1taW5fX2l0ZW0tLWFjdGl2ZScpO1xuLy8gXHRcdC8vc2xpZGVBY3RpdmUgPSBzbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpO1xuLy8gXHRcdGlmIChnZXRGdWxsV2lkdGggPiBzbGlkZXJNaW4pIHtcbi8vIFx0XHRcdHNsaWRlSXRlbU1pbi5jc3MoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwgMCknKTtcbi8vIFx0XHR9XG5cdFx0XG4vLyBcdH0gZWxzZSB7XG4vLyBcdFx0Ly90cmFuc2xhdGVXaWR0aCA9IC1zbGlkZXJJdGVtSW1nLndpZHRoKCkgKiAoc2xpZGVOb3cpO1xuLy8gXHRcdC8vc2xpZGVySXRlbS5jc3MoXG4vLyBcdFx0Ly9cdCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFuc2xhdGVXaWR0aCArICdweCwgMCknKTtcbi8vIFx0XHRzbGlkZU5vdysrO1xuLy8gXHRcdC8vbmF2QnRuSWQgPSBzbGlkZU5vdyAtMTtcbi8vIFx0XHQvL3NsaWRlSXRlbU1pbi5lcShuYXZCdG5JZCkuYWRkQ2xhc3MoJ3NsaWRlci1taW5fX2l0ZW0tLWFjdGl2ZScpO1xuLy8gXHRcdC8vc2xpZGVBY3RpdmUgPSBzbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpO1xuLy8gXHRcdGlmIChnZXRGdWxsV2lkdGggPiBzbGlkZXJNaW4pIHtcbi8vIFx0XHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKSAqIChzbGlkZU5vdyk7XG4vLyBcdFx0XHRzbGlkZUl0ZW1NaW4uY3NzKFxuLy8gXHRcdFx0J3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHRyYW5zbGF0ZVdpZHRoTWluICsgJ3B4LCAwKScpO1xuLy8gXHRcdH1cbi8vIFx0fVxuLy8gfVxuXG4vLyBmdW5jdGlvbiBwcmV2U2xpZGUgKCkge1xuLy8gXHQvL3NsaWRlQWN0aXZlLnJlbW92ZUNsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcbi8vIFx0aWYgKHNsaWRlTm93ID09IDEgfHwgc2xpZGVOb3cgPD0wIHx8IHNsaWRlTm93ID4gc2xpZGVDb3VudCkge1xuLy8gXHRcdC8vdHJhbnNsYXRlV2lkdGggPSAtc2xpZGVySXRlbUltZy53aWR0aCgpICogKHNsaWRlQ291bnQgLSAxKTtcbi8vIFx0XHQvL3NsaWRlckl0ZW0uY3NzKFxuLy8gXHRcdC8vXHQndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdHJhbnNsYXRlV2lkdGggKyAncHgsIDApJyk7XG4vLyBcdFx0c2xpZGVOb3cgPSBzbGlkZUNvdW50O1xuLy8gXHRcdC8vbmF2QnRuSWQgPSBzbGlkZU5vdyAtMTtcbi8vIFx0XHQvL3NsaWRlSXRlbU1pbi5lcShuYXZCdG5JZCkuYWRkQ2xhc3MoJ3NsaWRlci1taW5fX2l0ZW0tLWFjdGl2ZScpO1xuLy8gXHRcdC8vc2xpZGVBY3RpdmUgPSBzbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpO1xuLy8gXHRcdGlmIChnZXRGdWxsV2lkdGggPiBzbGlkZXJNaW4pIHtcbi8vIFx0XHRcdHRyYW5zbGF0ZVdpZHRoTWluID0gLXNsaWRlckl0ZW1JbWdNaW4ud2lkdGgoKSAqIChzbGlkZUNvdW50LTEpO1xuLy8gXHRcdFx0c2xpZGVJdGVtTWluLmNzcyhcbi8vIFx0XHRcdCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyB0cmFuc2xhdGVXaWR0aE1pbiArICdweCwgMCknKTtcbi8vIFx0XHR9XG4vLyBcdH0gZWxzZSB7XG4vLyBcdFx0Ly90cmFuc2xhdGVXaWR0aCA9IC1zbGlkZXJJdGVtSW1nLndpZHRoKCkgKiAoc2xpZGVOb3cgLSAyKTtcbi8vIFx0XHQvL3NsaWRlckl0ZW0uY3NzKFxuLy8gXHRcdC8vXHQndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgdHJhbnNsYXRlV2lkdGggKyAncHgsIDApJyk7XG4vLyBcdFx0c2xpZGVOb3ctLTtcbi8vIFx0XHQvL25hdkJ0bklkID0gc2xpZGVOb3cgLTE7XG4vLyBcdFx0Ly9zbGlkZUl0ZW1NaW4uZXEobmF2QnRuSWQpLmFkZENsYXNzKCdzbGlkZXItbWluX19pdGVtLS1hY3RpdmUnKTtcbi8vIFx0XHQvL3NsaWRlQWN0aXZlID0gc2xpZGVJdGVtTWluLmVxKG5hdkJ0bklkKTtcbi8vIFx0XHRpZiAoZ2V0RnVsbFdpZHRoID4gc2xpZGVyTWluKSB7XG4vLyBcdFx0XHR0cmFuc2xhdGVXaWR0aE1pbiA9IC1zbGlkZXJJdGVtSW1nTWluLndpZHRoKCkgKiAoc2xpZGVOb3ctMik7XG4vLyBcdFx0XHRzbGlkZUl0ZW1NaW4uY3NzKFxuLy8gXHRcdFx0J3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIHRyYW5zbGF0ZVdpZHRoTWluICsgJ3B4LCAwKScpO1xuLy8gXHRcdH1cbi8vIFx0fVxuLy8gfVxuXG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCkge1xuXG5cdC8vICQoJy5wb3B1cC1nYWxsZXJ5JykubWFnbmlmaWNQb3B1cCh7XG5cdC8vIFx0ZGVsZWdhdGU6ICdhJyxcblx0Ly8gXHR0eXBlOiAnaW1hZ2UnLFxuXHQvLyBcdHRMb2FkaW5nOiAnTG9hZGluZyBpbWFnZSAjJWN1cnIlLi4uJyxcblx0Ly8gXHRtYWluQ2xhc3M6ICdtZnAtaW1nLW1vYmlsZScsXG5cblx0Ly8gXHRnYWxsZXJ5OiB7XG5cdC8vIFx0XHRlbmFibGVkOiB0cnVlLFxuXHQvLyBcdFx0bmF2aWdhdGVCeUltZ0NsaWNrOiB0cnVlLFxuXHQvLyBcdFx0cHJlbG9hZDogWzEsIDJdIC8vIFdpbGwgcHJlbG9hZCAwIC0gYmVmb3JlIGN1cnJlbnQsIGFuZCAxIGFmdGVyIHRoZSBjdXJyZW50IGltYWdlXG5cdC8vIFx0fSxcblx0Ly8gXHRpbWFnZToge1xuXHQvLyBcdFx0dEVycm9yOiAnPGEgaHJlZj1cIiV1cmwlXCI+VGhlIGltYWdlICMlY3VyciU8L2E+IGNvdWxkIG5vdCBiZSBsb2FkZWQuJyxcblx0Ly8gXHRcdHRpdGxlU3JjOiBmdW5jdGlvbihpdGVtKSB7XG5cdC8vIFx0XHRcdHJldHVybiBpdGVtLmVsLmF0dHIoJ3RpdGxlJyk7XG5cdC8vIFx0XHR9XG5cdC8vIFx0fVxuXHQvLyB9KTtcblxuXG5cdC8vICQoJy5vcGVuLXBvcHVwLWxpbmsnKS5tYWduaWZpY1BvcHVwKHtcblx0Ly8gXHR0eXBlOiAnaW5saW5lJyxcblx0Ly8gXHRvdmVyZmxvd1k6ICdzY3JvbGwnXG5cdC8vIH0pO1xuXG5cdCQoJy5zbGlkZXJfX2l0ZW1zJykuc2xpY2soe1xuICAgIFx0c2xpZGVzVG9TaG93OiA2LFxuICBcdFx0c2xpZGVzVG9TY3JvbGw6IDMsXG4gIFx0XHRpbmZpbml0ZTogZmFsc2UsXG4gIFx0XHRyZXNwb25zaXZlOiBbXG4gIFx0XHRcdHtcbiAgXHRcdFx0XHRicmVha3BvaW50OiA4MDAsXG4gIFx0XHRcdFx0c2V0dGluZ3M6IHtcbiAgXHRcdFx0XHRcdHNsaWRlc1RvU2hvdzogNCxcbiAgXHRcdFx0XHRcdHNsaWRlc1RvU2Nyb2xsOiAxLFxuICBcdFx0XHRcdH1cbiAgXHRcdFx0fSxcbiAgXHRcdFx0e1xuICBcdFx0XHRcdGJyZWFrcG9pbnQ6IDUwMCxcbiAgXHRcdFx0XHRzZXR0aW5nczoge1xuICBcdFx0XHRcdFx0c2xpZGVzVG9TaG93OiAzLFxuICBcdFx0XHRcdFx0c2xpZGVzVG9TY3JvbGw6IDEsXG4gIFx0XHRcdFx0fVxuICBcdFx0XHR9LFxuICBcdFx0XVxuICBcdH0pO1xuXG5cblx0bWFpbkluZm8uY3NzKCdtYXJnaW4tdG9wJywgc3RpY2t5LmhlaWdodCgpICsgJ3B4Jyk7XG59KTtcblxudmFyIHN0aWNreSA9ICQoJy5wYWdlLWhlYWRlcicpO1xudmFyIG1haW5JbmZvID0gJCgnLm1haW4taW5mbycpO1xuXG5cbi8vICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24gKCkge1xuLy8gXHRtYWluSW5mby5jc3MoJ21hcmdpbi10b3AnLCBzdGlja3kuaGVpZ2h0KCkgKyAncHgnKTtcbi8vIH0pO1xuXG4vLyAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcbi8vIFx0bWFpbkluZm8uY3NzKCdtYXJnaW4tdG9wJywgc3RpY2t5LmhlaWdodCgpICsgJ3B4Jyk7XG4vLyB9KTtcblxuXG5cblxuXG5cbmZ1bmN0aW9uIGNhbGxCYWNrICgpIHtcbiAgICB2YXIgX292ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWZwLWJnJyk7XG4gICAgdmFyIF9jbGllbnRZID0gbnVsbDsgLy8gcmVtZW1iZXIgWSBwb3NpdGlvbiBvbiB0b3VjaCBzdGFydFxuXG4gICAgX292ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0VG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgIC8vIGRldGVjdCBzaW5nbGUgdG91Y2hcbiAgICAgICAgICAgIF9jbGllbnRZID0gZXZlbnQudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgX292ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgICAgLy8gZGV0ZWN0IHNpbmdsZSB0b3VjaFxuICAgICAgICAgICAgZGlzYWJsZVJ1YmJlckJhbmQoZXZlbnQpO1xuICAgICAgICB9XG4gICAgfSwgZmFsc2UpO1xuXG4gICAgZnVuY3Rpb24gZGlzYWJsZVJ1YmJlckJhbmQoZXZlbnQpIHtcbiAgICAgICAgdmFyIGNsaWVudFkgPSBldmVudC50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFkgLSBfY2xpZW50WTtcblxuICAgICAgICBpZiAoX292ZXJsYXkuc2Nyb2xsVG9wID09PSAwICYmIGNsaWVudFkgPiAwKSB7XG4gICAgICAgICAgICAvLyBlbGVtZW50IGlzIGF0IHRoZSB0b3Agb2YgaXRzIHNjcm9sbFxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc092ZXJsYXlUb3RhbGx5U2Nyb2xsZWQoKSAmJiBjbGllbnRZIDwgMCkge1xuICAgICAgICAgICAgLy9lbGVtZW50IGlzIGF0IHRoZSB0b3Agb2YgaXRzIHNjcm9sbFxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGlzT3ZlcmxheVRvdGFsbHlTY3JvbGxlZCgpIHtcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0VsZW1lbnQvc2Nyb2xsSGVpZ2h0I1Byb2JsZW1zX2FuZF9zb2x1dGlvbnNcbiAgICAgICAgcmV0dXJuIF9vdmVybGF5LnNjcm9sbEhlaWdodCAtIF9vdmVybGF5LnNjcm9sbFRvcCA8PSBfb3ZlcmxheS5jbGllbnRIZWlnaHQ7XG4gICAgfVxufTtcblxuXHQvLyBzaW5ndXAuYWRkRXZlbnRMaXN0ZW5lciAoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xuXHQvLyBcdC8vdmFyIGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZnAtYmcnKTtcblx0Ly8gXHQvL2NvbnNvbGUubG9nKGxheSk7XG5cblx0Ly8gXHQkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG5cdC8vIFx0XHRjYWxsQmFjayAoKTtcblx0Ly8gXHR9KTtcbiBcdFx0XG4gLy8gXHR9KTtcblxuXG4vLyAoZnVuY3Rpb24oKSB7XG4vLyAgIC8qIERlZmluZSBhIHZhcmnDoXZlbCBxdWUgZMOhIHN3aXBlIG5vIGxpZ2h0Ym94ICovXG4vLyAgIHZhciBtYWduaWZpY1BvcHVwID0gJC5tYWduaWZpY1BvcHVwLmluc3RhbmNlO1xuXG4vLyAgIC8qIENhcnJlZ2EgYSBmdW7Dp8OjbyBxdWFuZG8gY2xpY2Egbm8gbGlnaHRib3ggKHNlbsOjbyBuw6NvIHBlZ2EgYSBjbGFzc2UgdXRpbGl6YWRhKSAqL1xuLy8gICAkKFwiLnBvcHVwLWdhbGxlcnkgYVwiKS5jbGljayhmdW5jdGlvbihlKSB7XG5cbi8vICAgICAvKiBFc3BlcmEgY2FycmVnYXIgbyBsaWdodGJveCAqL1xuLy8gICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgIC8qIFN3aXBlIHBhcmEgYSBlc3F1ZXJkYSAtIFByw7N4aW1vICovXG4vLyAgICAgICAgICQoXCIubWZwLWNvbnRhaW5lclwiKS5zd2lwZSgge1xuLy8gICAgICAgICAgIHN3aXBlTGVmdDpmdW5jdGlvbihldmVudCwgZGlyZWN0aW9uLCBkaXN0YW5jZSwgZHVyYXRpb24sIGZpbmdlckNvdW50KSB7XG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyhcInN3aXBlIHJpZ2h0XCIpO1xuLy8gICAgICAgICAgICAgbWFnbmlmaWNQb3B1cC5uZXh0KCk7XG4vLyAgICAgICAgICAgfSxcblxuLy8gICAgICAgICAvKiBTd2lwZSBwYXJhIGEgZGlyZWl0YSAtIEFudGVyaW9yICovXG4vLyAgICAgICAgIHN3aXBlUmlnaHQ6ZnVuY3Rpb24oZXZlbnQsIGRpcmVjdGlvbiwgZGlzdGFuY2UsIGR1cmF0aW9uLCBmaW5nZXJDb3VudCkge1xuLy8gICAgICAgICAgIGNvbnNvbGUubG9nKFwic3dpcGUgbGVmdFwiKTtcbi8vICAgICAgICAgICBtYWduaWZpY1BvcHVwLnByZXYoKTtcbi8vICAgICAgICAgfSxcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfSwgNTAwKTtcbi8vICAgfSk7XG5cbi8vIH0pLmNhbGwodGhpcyk7XG5cblxuKGZ1bmN0aW9uKCQpIHtcbiAgICB2YXIgJHBzd3AgPSAkKCcucHN3cCcpWzBdO1xuICAgIHZhciBpbWFnZSA9IFtdO1xuXG4gICAgJCgnLnBvcHVwLWdhbGxlcnknKS5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyICRwaWMgICAgID0gJCh0aGlzKSxcbiAgICAgICAgICAgIGdldEl0ZW1zID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XG4gICAgICAgICAgICAgICAgJHBpYy5maW5kKCdhJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyICRocmVmICAgPSAkKHRoaXMpLmF0dHIoJ2hyZWYnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRzaXplICAgPSBbMTAwMCwgNjY3XSxcbiAgICAgICAgICAgICAgICAgICAgICAgICR3aWR0aCAgPSAkc2l6ZVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICRoZWlnaHQgPSAkc2l6ZVsxXTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNyYyA6ICRocmVmLFxuICAgICAgICAgICAgICAgICAgICAgICAgdyAgIDogJHdpZHRoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaCAgIDogJGhlaWdodFxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaXRlbXM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgdmFyIGl0ZW1zID0gZ2V0SXRlbXMoKTtcblxuICAgICAgICAkLmVhY2goaXRlbXMsIGZ1bmN0aW9uKGluZGV4LCB2YWx1ZSkge1xuICAgICAgICAgICAgaW1hZ2VbaW5kZXhdICAgICA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgaW1hZ2VbaW5kZXhdLnNyYyA9IHZhbHVlWydzcmMnXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJHBpYy5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB2YXIgJGluZGV4ID0gJCh0aGlzKS5pbmRleCgpO1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6ICRpbmRleCxcbiAgICAgICAgICAgICAgICBiZ09wYWNpdHk6IDAuNyxcbiAgICAgICAgICAgICAgICBzaG93SGlkZU9wYWNpdHk6IHRydWUsXG4gICAgICAgICAgICAgICAgY2xvc2VPblNjcm9sbDogZmFsc2UsXG4gICAgICAgICAgICAgICAgYXJyb3dLZXlzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHNoYXJlRWw6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHNob3dIaWRlT3BhY2l0eTogdHJ1ZSxcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGxpZ2h0Qm94ID0gbmV3IFBob3RvU3dpcGUoJHBzd3AsIFBob3RvU3dpcGVVSV9EZWZhdWx0LCBpdGVtcywgb3B0aW9ucyk7XG4gICAgICAgICAgICBsaWdodEJveC5pbml0KCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufSkoalF1ZXJ5KTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
